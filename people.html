---
layout: default
title: People
permalink: /people/
---

<h1>People</h1>

<!-- ======================
     HEAD OF LAB (STATIC)
     ====================== -->

<section class="people-section">
  <h2>Head of Lab</h2>

  <div class="person-card head">
    <img src="{{ '/assets/img/rui-yang-photo.jpg' | relative_url }}" alt="Rui (Ray) Yang">

    <div class="person-info">
      <div class="person-name">Rui (Ray) Yang, MD, PhD</div>
      <div class="person-bio">
        Dr. Rui (Ray) Yang is a board-certified pediatrician and incoming
        tenure-track assistant professor at Baylor College of Medicine (BCM).
        He will launch his laboratory at Texas Children’s Hospital in summer 2026.
        His research focuses on monogenic causes of life-threatening infectious diseases,
        immune dysregulation, and malignancies.
      </div>
    </div>
  </div>
</section>

<!-- ======================
     TRAINEES
     ====================== -->

<section class="people-section">
  <h2>Trainees</h2>
  <div id="trainees" class="people-grid">
    <p>Loading trainees…</p>
  </div>
</section>

<!-- ======================
     RESEARCH STAFF
     ====================== -->

<section class="people-section">
  <h2>Research Staff</h2>
  <div id="staff" class="people-grid">
    <p>Loading research staff…</p>
  </div>
</section>

<!-- ======================
     CLOSE COLLABORATORS
     ====================== -->

<section class="people-section">
  <h2>Close Collaborators</h2>
  <div id="collaborators" class="people-grid">
    <p>Loading collaborators…</p>
  </div>
</section>

<script>
/* =========================
   GOOGLE SHEET CONFIG
   ========================= */

const SHEET_ID = "166QgKaRxVyZuTKAfiX9XLXNVgW6dnsd-10VvFB7nJxg";
const SHEET_NAME = "Sheet1";
const DEFAULT_PHOTO = "{{ '/assets/img/person-placeholder.png' | relative_url }}";

const url =
  `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${SHEET_NAME}`;

/* =========================
   HELPERS
   ========================= */

function cleanText(v) {
  return v ? String(v) : "";
}

function parseGvizDate(v) {
  if (!v) return "";

  // Google Sheets returns Date(YYYY,M,D)
  if (typeof v === "string" && v.startsWith("Date")) {
    const parts = v.match(/\d+/g).map(Number);
    const d = new Date(parts[0], parts[1], parts[2]);
    return d.toLocaleDateString("en-US");
  }

  return v;
}

/* =========================
   FETCH + RENDER
   ========================= */

fetch(url)
  .then(res => res.text())
  .then(text => {
    const json = JSON.parse(text.substring(47).slice(0, -2));
    const rows = json.table.rows || [];

    const trainees = document.getElementById("trainees");
    const staff = document.getElementById("staff");
    const collaborators = document.getElementById("collaborators");

    trainees.innerHTML = "";
    staff.innerHTML = "";
    collaborators.innerHTML = "";

    if (!rows.length) {
      trainees.innerHTML = "<p>No trainees listed.</p>";
      staff.innerHTML = "<p>No research staff listed.</p>";
      collaborators.innerHTML = "<p>No collaborators listed.</p>";
      return;
    }

    rows.forEach(r => {
      const name = cleanText(r.c[0]?.v);
      const category = cleanText(r.c[1]?.v);
      const role = cleanText(r.c[2]?.v);
      const photo = cleanText(r.c[3]?.v) || DEFAULT_PHOTO;
      const start = parseGvizDate(r.c[4]?.v);
      const end = parseGvizDate(r.c[5]?.v);
      const bio = cleanText(r.c[6]?.v);

      const dates = (start || end) ? `${start}–${end}` : "";

      const card = document.createElement("div");
      card.className = "person-card trainee";

      card.innerHTML = `
        <img src="${photo}" alt="${name}">
        <div class="person-info">
          <div class="person-name">${name}</div>
          <div class="person-role">${role}</div>
          ${dates ? `<div class="person-dates">${dates}</div>` : ""}
          <div class="person-bio">${bio}</div>
        </div>
      `;

      if (category === "Trainee") {
        trainees.appendChild(card);
      } else if (category === "Research Staff") {
        staff.appendChild(card);
      } else if (category === "Close Collaborator") {
        collaborators.appendChild(card);
      }
    });

    if (!trainees.children.length)
      trainees.innerHTML = "<p>No trainees listed.</p>";
    if (!staff.children.length)
      staff.innerHTML = "<p>No research staff listed.</p>";
    if (!collaborators.children.length)
      collaborators.innerHTML = "<p>No collaborators listed.</p>";
  })
  .catch(err => {
    console.error(err);
    document.getElementById("trainees").innerHTML = "<p>Error loading people.</p>";
    document.getElementById("staff").innerHTML = "<p>Error loading people.</p>";
    document.getElementById("collaborators").innerHTML = "<p>Error loading people.</p>";
  });
</script>
